!function(g){var I={};function C(A){if(I[A])return I[A].exports;var c=I[A]={i:A,l:!1,exports:{}};return g[A].call(c.exports,c,c.exports,C),c.l=!0,c.exports}C.m=g,C.c=I,C.d=function(g,I,A){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var c in g)C.d(A,c,function(I){return g[I]}.bind(null,c));return A},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\n// service worker registration - remove if you're not going to use it\n\nif ('serviceWorker' in navigator) {\n    window.addEventListener('load', function () {\n        navigator.serviceWorker.register('serviceworker.js').then(function (registration) {\n            // Registration was successful\n            console.log('ServiceWorker registration successful with scope: ', registration.scope);\n        }, function (err) {\n            // registration failed :(\n            console.log('ServiceWorker registration failed: ', err);\n        });\n    });\n}\n\n// place your code below\n\nconst memo = {\n    cards: [],\n    discoveredCards: [],\n    pairs: [],\n\n    shuffle(array) {\n        // Using Fisher-Yates Algorithm to shuffle an array \n        // got it from https://medium.com/@nitinpatel_20236/how-to-shuffle-correctly-shuffle-an-array-in-javascript-15ea3f84bfb\n        for (let i = array.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * array.length)\n            const temp = array[i]\n            array[i] = array[j]\n            array[j] = temp\n        }\n    },\n    setAmount(value) {\n        this.cards.length = 0;\n        for (let i = 0; i < value; i++) {\n            this.cards.push(i);\n        }\n    },\n    createCards() {\n        this.shuffle(this.cards);\n        this.cards.forEach((cardId) => {\n            const board = document.querySelector('.board');\n            const card = document.createElement('div');\n            card.className = 'card';\n            card.id = memo.cards[cardId];\n            //! uncomment line below to turn on godmode\n            // card.innerHTML = memo.cards[cardId];\n            board.appendChild(card);\n        });\n    },\n    searchPairs() {\n        const board = document.querySelector('.board');\n        board.addEventListener('click', (e) => {\n            if (this.discoveredCards.length < 2 && e.target.className === 'card') {\n                let id = parseInt(e.target.id);\n                const card = document.getElementById(id);\n                card.classList.add('card-reverse', `card-reverse--${id}`);\n                this.discoveredCards.push(id);\n                this.checkPairs();\n                counters.score();\n            }\n        })\n    },\n    checkPairs() {\n        if (this.discoveredCards.length > 1) {\n            let card1 = document.getElementById(this.discoveredCards[0]);\n            let card2 = document.getElementById(this.discoveredCards[1]);\n            let card1BackgroundColor = window.getComputedStyle(card1).getPropertyValue('background-color');\n            let card2BackgroundColor = window.getComputedStyle(card2).getPropertyValue('background-color');\n            if (card1BackgroundColor === card2BackgroundColor) {\n                this.pairs.push(this.discoveredCards[0], this.discoveredCards[1]);\n                card1.classList.add('card--hidden');\n                card2.classList.add('card--hidden');\n                card1.classList.remove('card');\n                card2.classList.remove('card');\n                this.discoveredCards.length = 0;\n            } else {\n                counters.moveCounter();\n                setTimeout(() => {\n                    this.discoveredCards.forEach(card => {\n                        const a = document.getElementById(card);\n                        a.classList.remove('card-reverse', `card-reverse--${card}`);\n                    })\n                    this.discoveredCards.length = 0;\n                }, 1000);\n            }\n        }\n    }\n};\n\nconst counters = {\n    wrongMoves: [0],\n    finalScore: [],\n    score() {\n        const pairsCounter = document.querySelector('.pairs-counter');\n        let pairsAmount = memo.pairs.length / 2\n        //add 10 point for evemonospacery pair and remove 2 points for every miss\n        let score = pairsAmount * 10 - this.wrongMoves * 2;\n        pairsCounter.innerHTML = score;\n\n        if (pairsAmount === memo.cards.length / 2) {\n            console.log('Gratulacje - wygrałeś grę');\n            this.finalScore.push(score);\n            //clean up board\n            const board = document.querySelector('.board');\n            board.innerHTML = '';\n\n            handlers.playAgain();\n        }\n    },\n    moveCounter() {\n        //count moves without finding pairs\n        this.wrongMoves[0]++\n    },\n    saveScore() {\n        //TODO allow user to use same name multiple time\n        if (this.finalScore.length > 0) {\n            let userName = localStorage.getItem('User Name');\n            class User {\n                constructor(name, score) {\n                    this.name = name;\n                    this.score = score;\n                }\n            }\n            let user = new User(userName, this.finalScore[0]);\n            localStorage.setItem(`memo-${userName}`, JSON.stringify(user));\n            this.finalScore.length = 0;\n        }\n    }\n}\n\nconst handlers = {\n    startGame() {\n        const startButton = document.querySelector('.start-button');\n        const scoreTitle = document.querySelector('.header__heading');\n        const pairsCounter = document.querySelector('.pairs-counter');\n        const footer = document.querySelector('.footer');\n        startButton.addEventListener('click', (e) => {\n            //reset counter value\n            pairsCounter.innerHTML = 0;\n            scoreTitle.innerHTML = 'score';\n            memo.createCards();\n            memo.searchPairs();\n            startButton.classList.add('hidden');\n            const setLevel = document.querySelector('.set-level');\n            setLevel.classList.add('hidden');\n            footer.classList.add('hidden');\n            this.hideScoreBoard();\n            //reset finalScore in case if user didnt submit score..\n            counters.finalScore.length = 0;\n            handlers.toggleExitButton();\n\n        })\n    },\n    playAgain() {\n        this.createUser();\n        memo.discoveredCards.length = 0;\n        memo.pairs.length = 0;\n        counters.wrongMoves[0] = 0;\n        const startButton = document.querySelector('.start-button');\n        const setLevel = document.querySelector('.set-level');\n        startButton.classList.remove('hidden');\n        startButton.innerHTML = 'play again';\n        setLevel.classList.remove('hidden');\n        handlers.toggleExitButton();\n\n\n    },\n    setDifficulty() {\n        const setLevel = document.querySelector('.set-level');\n        const radioButtonEasy = document.querySelector('.radio-button--easy');\n        const radioButtonMedium = document.querySelector('.radio-button--medium');\n        const radioButtonHard = document.querySelector('.radio-button--hard');\n        const board = document.querySelector('.board');\n        //default difficulty value - EASY\n        memo.setAmount(8);\n        board.classList.add('board--easy');\n        //change difficulty value on click \n        setLevel.addEventListener('click', (e) => {\n            switch (e.target.id) {\n                case 'radio-button--easy':\n                    memo.setAmount(8);\n                    board.classList.add('board--easy');\n                    if (board.classList === 'board--medium') {\n                        board.classList.remove('board--medium');\n                    }\n                    if (board.classList === 'board--hard') {\n                        board.classList.remove('board--hard');\n                    }\n                    break;\n                case 'radio-button--medium':\n                    memo.setAmount(12);\n                    board.classList.add('board--medium');\n                    if (board.classList === 'board--easy') {\n                        board.classList.remove('board--easy');\n                    }\n                    if (board.classList === 'board--hard') {\n                        board.classList.remove('board--hard');\n                    }\n                    break;\n                case 'radio-button--hard':\n                    memo.setAmount(16);\n                    board.classList.add('board--hard');\n                    if (board.classList === 'board--easy') {\n                        board.classList.remove('board--easy');\n                    }\n                    if (board.classList === 'board--medium') {\n                        board.classList.remove('board--medium');\n                    }\n                    break;\n            }\n        })\n    },\n    createUser() {\n        const userInput = document.querySelector('.username');\n        const userSection = document.querySelector('.user');\n        const submitButton = document.querySelector('.user__submit-button');\n        const user = {\n            name: ''\n        };\n\n        function submitUser() {\n            // TODO delete previous added n before adding new n\n            const memoUsers = [];\n            for (let i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).startsWith('memo')) {\n                    memoUsers.push(localStorage.key(i));\n                }\n            }\n            let n = 0;\n            while (memoUsers.includes(`memo-${user.name}`)) {\n                user.name = user.name + n;\n                n++\n            }\n            localStorage.setItem('User Name', user.name);\n            counters.saveScore();\n            userSection.classList.add('hidden');\n            userInput.value = '';\n            handlers.createScoreBoard();\n        };\n\n        userSection.classList.remove('hidden');\n        //use enter for submiting user\n        userInput.addEventListener('keyup', (e) => {\n            user.name = userInput.value;\n            if (e.keyCode === 13) {\n                submitUser();\n            }\n        })\n        //use submit button for submiting user\n        submitButton.addEventListener('click', (e) => {\n            submitUser();\n        })\n        handlers.createScoreBoard();\n        user.name = '';\n    },\n\n    createScoreBoard() {\n        const scoreBoard = document.querySelector('.scoreboard');\n        const scoreBoardList = document.querySelector('.scoreboard__list');\n        scoreBoard.classList.remove('hidden');\n        scoreBoardList.innerHTML = '';\n        const users = [];\n        for (let i = 0; i < localStorage.length; i++) {\n\n            let key = localStorage.key(i);\n            //prevents pushing others local stories entries to scoreboards\n            if (key.startsWith('memo')) {\n                let user = JSON.parse(localStorage.getItem(localStorage.key(i)));\n                users.push(user);\n            }\n            // THEN sort array of objects by value\n            //got it from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\n            users.sort(function (a, b) {\n                return a.score - b.score;\n            });\n            users.reverse();\n            //slice it to show only top 10 score\n            if (users.length > 10) {\n                users.splice(10);\n            }\n        }\n        // create ordered list with top scores\n        users.forEach((user, index) => {\n            const li = document.createElement('li');\n            li.classname = 'scoreboard__item';\n            scoreBoardList.appendChild(li);\n            li.innerHTML = ` ${user.name} ${user.score}`;\n        })\n        users.length = 0;\n\n\n    },\n    hideScoreBoard() {\n        const scoreBoard = document.querySelector('.scoreboard');\n        const userSection = document.querySelector('.user');\n        scoreBoard.classList.add('hidden')\n        userSection.classList.add('hidden')\n    },\n\n    toggleExitButton() {\n        const exitButton = document.querySelector('.header__exit');\n        exitButton.classList.toggle('hidden');\n    }\n\n};\nhandlers.setDifficulty();\nhandlers.startGame();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLE9BQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdUJBQXVCLFdBQVc7QUFDbEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLEdBQUc7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLEtBQUs7QUFDakYscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxTQUFTO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix5QkFBeUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxVQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHlCQUF5Qjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixVQUFVLEdBQUcsV0FBVztBQUN2RCxTQUFTO0FBQ1Q7OztBQUdBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vLyBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gLSByZW1vdmUgaWYgeW91J3JlIG5vdCBnb2luZyB0byB1c2UgaXRcblxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2V3b3JrZXIuanMnKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiB3YXMgc3VjY2Vzc2Z1bFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZCA6KFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbi8vIHBsYWNlIHlvdXIgY29kZSBiZWxvd1xuXG5jb25zdCBtZW1vID0ge1xuICAgIGNhcmRzOiBbXSxcbiAgICBkaXNjb3ZlcmVkQ2FyZHM6IFtdLFxuICAgIHBhaXJzOiBbXSxcblxuICAgIHNodWZmbGUoYXJyYXkpIHtcbiAgICAgICAgLy8gVXNpbmcgRmlzaGVyLVlhdGVzIEFsZ29yaXRobSB0byBzaHVmZmxlIGFuIGFycmF5IFxuICAgICAgICAvLyBnb3QgaXQgZnJvbSBodHRwczovL21lZGl1bS5jb20vQG5pdGlucGF0ZWxfMjAyMzYvaG93LXRvLXNodWZmbGUtY29ycmVjdGx5LXNodWZmbGUtYW4tYXJyYXktaW4tamF2YXNjcmlwdC0xNWVhM2Y4NGJmYlxuICAgICAgICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aClcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBhcnJheVtpXVxuICAgICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXVxuICAgICAgICAgICAgYXJyYXlbal0gPSB0ZW1wXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldEFtb3VudCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmNhcmRzLmxlbmd0aCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWU7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jYXJkcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjcmVhdGVDYXJkcygpIHtcbiAgICAgICAgdGhpcy5zaHVmZmxlKHRoaXMuY2FyZHMpO1xuICAgICAgICB0aGlzLmNhcmRzLmZvckVhY2goKGNhcmRJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9hcmQnKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNhcmQuY2xhc3NOYW1lID0gJ2NhcmQnO1xuICAgICAgICAgICAgY2FyZC5pZCA9IG1lbW8uY2FyZHNbY2FyZElkXTtcbiAgICAgICAgICAgIC8vISB1bmNvbW1lbnQgbGluZSBiZWxvdyB0byB0dXJuIG9uIGdvZG1vZGVcbiAgICAgICAgICAgIC8vIGNhcmQuaW5uZXJIVE1MID0gbWVtby5jYXJkc1tjYXJkSWRdO1xuICAgICAgICAgICAgYm9hcmQuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgc2VhcmNoUGFpcnMoKSB7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkJyk7XG4gICAgICAgIGJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc2NvdmVyZWRDYXJkcy5sZW5ndGggPCAyICYmIGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gJ2NhcmQnKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlkID0gcGFyc2VJbnQoZS50YXJnZXQuaWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkLXJldmVyc2UnLCBgY2FyZC1yZXZlcnNlLS0ke2lkfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzY292ZXJlZENhcmRzLnB1c2goaWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tQYWlycygpO1xuICAgICAgICAgICAgICAgIGNvdW50ZXJzLnNjb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBjaGVja1BhaXJzKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNjb3ZlcmVkQ2FyZHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbGV0IGNhcmQxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXNjb3ZlcmVkQ2FyZHNbMF0pO1xuICAgICAgICAgICAgbGV0IGNhcmQyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kaXNjb3ZlcmVkQ2FyZHNbMV0pO1xuICAgICAgICAgICAgbGV0IGNhcmQxQmFja2dyb3VuZENvbG9yID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoY2FyZDEpLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQtY29sb3InKTtcbiAgICAgICAgICAgIGxldCBjYXJkMkJhY2tncm91bmRDb2xvciA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGNhcmQyKS5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gICAgICAgICAgICBpZiAoY2FyZDFCYWNrZ3JvdW5kQ29sb3IgPT09IGNhcmQyQmFja2dyb3VuZENvbG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWlycy5wdXNoKHRoaXMuZGlzY292ZXJlZENhcmRzWzBdLCB0aGlzLmRpc2NvdmVyZWRDYXJkc1sxXSk7XG4gICAgICAgICAgICAgICAgY2FyZDEuY2xhc3NMaXN0LmFkZCgnY2FyZC0taGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgY2FyZDIuY2xhc3NMaXN0LmFkZCgnY2FyZC0taGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgY2FyZDEuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZCcpO1xuICAgICAgICAgICAgICAgIGNhcmQyLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2NvdmVyZWRDYXJkcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb3VudGVycy5tb3ZlQ291bnRlcigpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2NvdmVyZWRDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhcmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkLXJldmVyc2UnLCBgY2FyZC1yZXZlcnNlLS0ke2NhcmR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY292ZXJlZENhcmRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBjb3VudGVycyA9IHtcbiAgICB3cm9uZ01vdmVzOiBbMF0sXG4gICAgZmluYWxTY29yZTogW10sXG4gICAgc2NvcmUoKSB7XG4gICAgICAgIGNvbnN0IHBhaXJzQ291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWlycy1jb3VudGVyJyk7XG4gICAgICAgIGxldCBwYWlyc0Ftb3VudCA9IG1lbW8ucGFpcnMubGVuZ3RoIC8gMlxuICAgICAgICAvL2FkZCAxMCBwb2ludCBmb3IgZXZlbW9ub3NwYWNlcnkgcGFpciBhbmQgcmVtb3ZlIDIgcG9pbnRzIGZvciBldmVyeSBtaXNzXG4gICAgICAgIGxldCBzY29yZSA9IHBhaXJzQW1vdW50ICogMTAgLSB0aGlzLndyb25nTW92ZXMgKiAyO1xuICAgICAgICBwYWlyc0NvdW50ZXIuaW5uZXJIVE1MID0gc2NvcmU7XG5cbiAgICAgICAgaWYgKHBhaXJzQW1vdW50ID09PSBtZW1vLmNhcmRzLmxlbmd0aCAvIDIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHcmF0dWxhY2plIC0gd3lncmHFgmXFmyBncsSZJyk7XG4gICAgICAgICAgICB0aGlzLmZpbmFsU2NvcmUucHVzaChzY29yZSk7XG4gICAgICAgICAgICAvL2NsZWFuIHVwIGJvYXJkXG4gICAgICAgICAgICBjb25zdCBib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZCcpO1xuICAgICAgICAgICAgYm9hcmQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIGhhbmRsZXJzLnBsYXlBZ2FpbigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtb3ZlQ291bnRlcigpIHtcbiAgICAgICAgLy9jb3VudCBtb3ZlcyB3aXRob3V0IGZpbmRpbmcgcGFpcnNcbiAgICAgICAgdGhpcy53cm9uZ01vdmVzWzBdKytcbiAgICB9LFxuICAgIHNhdmVTY29yZSgpIHtcbiAgICAgICAgLy9UT0RPIGFsbG93IHVzZXIgdG8gdXNlIHNhbWUgbmFtZSBtdWx0aXBsZSB0aW1lXG4gICAgICAgIGlmICh0aGlzLmZpbmFsU2NvcmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGV0IHVzZXJOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1VzZXIgTmFtZScpO1xuICAgICAgICAgICAgY2xhc3MgVXNlciB7XG4gICAgICAgICAgICAgICAgY29uc3RydWN0b3IobmFtZSwgc2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB1c2VyID0gbmV3IFVzZXIodXNlck5hbWUsIHRoaXMuZmluYWxTY29yZVswXSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbWVtby0ke3VzZXJOYW1lfWAsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTtcbiAgICAgICAgICAgIHRoaXMuZmluYWxTY29yZS5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBoYW5kbGVycyA9IHtcbiAgICBzdGFydEdhbWUoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0LWJ1dHRvbicpO1xuICAgICAgICBjb25zdCBzY29yZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9faGVhZGluZycpO1xuICAgICAgICBjb25zdCBwYWlyc0NvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFpcnMtY291bnRlcicpO1xuICAgICAgICBjb25zdCBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJyk7XG4gICAgICAgIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIC8vcmVzZXQgY291bnRlciB2YWx1ZVxuICAgICAgICAgICAgcGFpcnNDb3VudGVyLmlubmVySFRNTCA9IDA7XG4gICAgICAgICAgICBzY29yZVRpdGxlLmlubmVySFRNTCA9ICdzY29yZSc7XG4gICAgICAgICAgICBtZW1vLmNyZWF0ZUNhcmRzKCk7XG4gICAgICAgICAgICBtZW1vLnNlYXJjaFBhaXJzKCk7XG4gICAgICAgICAgICBzdGFydEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGNvbnN0IHNldExldmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldC1sZXZlbCcpO1xuICAgICAgICAgICAgc2V0TGV2ZWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBmb290ZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLmhpZGVTY29yZUJvYXJkKCk7XG4gICAgICAgICAgICAvL3Jlc2V0IGZpbmFsU2NvcmUgaW4gY2FzZSBpZiB1c2VyIGRpZG50IHN1Ym1pdCBzY29yZS4uXG4gICAgICAgICAgICBjb3VudGVycy5maW5hbFNjb3JlLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBoYW5kbGVycy50b2dnbGVFeGl0QnV0dG9uKCk7XG5cbiAgICAgICAgfSlcbiAgICB9LFxuICAgIHBsYXlBZ2FpbigpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVVc2VyKCk7XG4gICAgICAgIG1lbW8uZGlzY292ZXJlZENhcmRzLmxlbmd0aCA9IDA7XG4gICAgICAgIG1lbW8ucGFpcnMubGVuZ3RoID0gMDtcbiAgICAgICAgY291bnRlcnMud3JvbmdNb3Zlc1swXSA9IDA7XG4gICAgICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0LWJ1dHRvbicpO1xuICAgICAgICBjb25zdCBzZXRMZXZlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXQtbGV2ZWwnKTtcbiAgICAgICAgc3RhcnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHN0YXJ0QnV0dG9uLmlubmVySFRNTCA9ICdwbGF5IGFnYWluJztcbiAgICAgICAgc2V0TGV2ZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGhhbmRsZXJzLnRvZ2dsZUV4aXRCdXR0b24oKTtcblxuXG4gICAgfSxcbiAgICBzZXREaWZmaWN1bHR5KCkge1xuICAgICAgICBjb25zdCBzZXRMZXZlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXQtbGV2ZWwnKTtcbiAgICAgICAgY29uc3QgcmFkaW9CdXR0b25FYXN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhZGlvLWJ1dHRvbi0tZWFzeScpO1xuICAgICAgICBjb25zdCByYWRpb0J1dHRvbk1lZGl1bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yYWRpby1idXR0b24tLW1lZGl1bScpO1xuICAgICAgICBjb25zdCByYWRpb0J1dHRvbkhhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmFkaW8tYnV0dG9uLS1oYXJkJyk7XG4gICAgICAgIGNvbnN0IGJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkJyk7XG4gICAgICAgIC8vZGVmYXVsdCBkaWZmaWN1bHR5IHZhbHVlIC0gRUFTWVxuICAgICAgICBtZW1vLnNldEFtb3VudCg4KTtcbiAgICAgICAgYm9hcmQuY2xhc3NMaXN0LmFkZCgnYm9hcmQtLWVhc3knKTtcbiAgICAgICAgLy9jaGFuZ2UgZGlmZmljdWx0eSB2YWx1ZSBvbiBjbGljayBcbiAgICAgICAgc2V0TGV2ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlLnRhcmdldC5pZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JhZGlvLWJ1dHRvbi0tZWFzeSc6XG4gICAgICAgICAgICAgICAgICAgIG1lbW8uc2V0QW1vdW50KDgpO1xuICAgICAgICAgICAgICAgICAgICBib2FyZC5jbGFzc0xpc3QuYWRkKCdib2FyZC0tZWFzeScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmQuY2xhc3NMaXN0ID09PSAnYm9hcmQtLW1lZGl1bScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkLS1tZWRpdW0nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmQuY2xhc3NMaXN0ID09PSAnYm9hcmQtLWhhcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZC0taGFyZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JhZGlvLWJ1dHRvbi0tbWVkaXVtJzpcbiAgICAgICAgICAgICAgICAgICAgbWVtby5zZXRBbW91bnQoMTIpO1xuICAgICAgICAgICAgICAgICAgICBib2FyZC5jbGFzc0xpc3QuYWRkKCdib2FyZC0tbWVkaXVtJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChib2FyZC5jbGFzc0xpc3QgPT09ICdib2FyZC0tZWFzeScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkLS1lYXN5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvYXJkLmNsYXNzTGlzdCA9PT0gJ2JvYXJkLS1oYXJkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9hcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9hcmQtLWhhcmQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyYWRpby1idXR0b24tLWhhcmQnOlxuICAgICAgICAgICAgICAgICAgICBtZW1vLnNldEFtb3VudCgxNik7XG4gICAgICAgICAgICAgICAgICAgIGJvYXJkLmNsYXNzTGlzdC5hZGQoJ2JvYXJkLS1oYXJkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChib2FyZC5jbGFzc0xpc3QgPT09ICdib2FyZC0tZWFzeScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvYXJkLS1lYXN5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvYXJkLmNsYXNzTGlzdCA9PT0gJ2JvYXJkLS1tZWRpdW0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdib2FyZC0tbWVkaXVtJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBjcmVhdGVVc2VyKCkge1xuICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcm5hbWUnKTtcbiAgICAgICAgY29uc3QgdXNlclNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcicpO1xuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fc3VibWl0LWJ1dHRvbicpO1xuICAgICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICAgICAgbmFtZTogJydcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBzdWJtaXRVc2VyKCkge1xuICAgICAgICAgICAgLy8gVE9ETyBkZWxldGUgcHJldmlvdXMgYWRkZWQgbiBiZWZvcmUgYWRkaW5nIG5ldyBuXG4gICAgICAgICAgICBjb25zdCBtZW1vVXNlcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5rZXkoaSkuc3RhcnRzV2l0aCgnbWVtbycpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbW9Vc2Vycy5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChtZW1vVXNlcnMuaW5jbHVkZXMoYG1lbW8tJHt1c2VyLm5hbWV9YCkpIHtcbiAgICAgICAgICAgICAgICB1c2VyLm5hbWUgPSB1c2VyLm5hbWUgKyBuO1xuICAgICAgICAgICAgICAgIG4rK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1VzZXIgTmFtZScsIHVzZXIubmFtZSk7XG4gICAgICAgICAgICBjb3VudGVycy5zYXZlU2NvcmUoKTtcbiAgICAgICAgICAgIHVzZXJTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdXNlcklucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICBoYW5kbGVycy5jcmVhdGVTY29yZUJvYXJkKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdXNlclNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIC8vdXNlIGVudGVyIGZvciBzdWJtaXRpbmcgdXNlclxuICAgICAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdXNlci5uYW1lID0gdXNlcklucHV0LnZhbHVlO1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICBzdWJtaXRVc2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC8vdXNlIHN1Ym1pdCBidXR0b24gZm9yIHN1Ym1pdGluZyB1c2VyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBzdWJtaXRVc2VyKCk7XG4gICAgICAgIH0pXG4gICAgICAgIGhhbmRsZXJzLmNyZWF0ZVNjb3JlQm9hcmQoKTtcbiAgICAgICAgdXNlci5uYW1lID0gJyc7XG4gICAgfSxcblxuICAgIGNyZWF0ZVNjb3JlQm9hcmQoKSB7XG4gICAgICAgIGNvbnN0IHNjb3JlQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmVib2FyZCcpO1xuICAgICAgICBjb25zdCBzY29yZUJvYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY29yZWJvYXJkX19saXN0Jyk7XG4gICAgICAgIHNjb3JlQm9hcmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHNjb3JlQm9hcmRMaXN0LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBjb25zdCB1c2VycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICBsZXQga2V5ID0gbG9jYWxTdG9yYWdlLmtleShpKTtcbiAgICAgICAgICAgIC8vcHJldmVudHMgcHVzaGluZyBvdGhlcnMgbG9jYWwgc3RvcmllcyBlbnRyaWVzIHRvIHNjb3JlYm9hcmRzXG4gICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ21lbW8nKSkge1xuICAgICAgICAgICAgICAgIGxldCB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2Uua2V5KGkpKSk7XG4gICAgICAgICAgICAgICAgdXNlcnMucHVzaCh1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRIRU4gc29ydCBhcnJheSBvZiBvYmplY3RzIGJ5IHZhbHVlXG4gICAgICAgICAgICAvL2dvdCBpdCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L3NvcnRcbiAgICAgICAgICAgIHVzZXJzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYS5zY29yZSAtIGIuc2NvcmU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHVzZXJzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIC8vc2xpY2UgaXQgdG8gc2hvdyBvbmx5IHRvcCAxMCBzY29yZVxuICAgICAgICAgICAgaWYgKHVzZXJzLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgICAgICAgICAgdXNlcnMuc3BsaWNlKDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjcmVhdGUgb3JkZXJlZCBsaXN0IHdpdGggdG9wIHNjb3Jlc1xuICAgICAgICB1c2Vycy5mb3JFYWNoKCh1c2VyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgbGkuY2xhc3NuYW1lID0gJ3Njb3JlYm9hcmRfX2l0ZW0nO1xuICAgICAgICAgICAgc2NvcmVCb2FyZExpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgbGkuaW5uZXJIVE1MID0gYCAke3VzZXIubmFtZX0gJHt1c2VyLnNjb3JlfWA7XG4gICAgICAgIH0pXG4gICAgICAgIHVzZXJzLmxlbmd0aCA9IDA7XG5cblxuICAgIH0sXG4gICAgaGlkZVNjb3JlQm9hcmQoKSB7XG4gICAgICAgIGNvbnN0IHNjb3JlQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmVib2FyZCcpO1xuICAgICAgICBjb25zdCB1c2VyU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyJyk7XG4gICAgICAgIHNjb3JlQm9hcmQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICAgICAgdXNlclNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcbiAgICB9LFxuXG4gICAgdG9nZ2xlRXhpdEJ1dHRvbigpIHtcbiAgICAgICAgY29uc3QgZXhpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2V4aXQnKTtcbiAgICAgICAgZXhpdEJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICB9XG5cbn07XG5oYW5kbGVycy5zZXREaWZmaWN1bHR5KCk7XG5oYW5kbGVycy5zdGFydEdhbWUoKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")}]);